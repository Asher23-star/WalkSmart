<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Login_Style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="icon" href="wordless.png" type="image/png">
    <title>Register</title>
</head>

<body>
    <img src="Walk Smart.png" class="logo">
    <h1 class="walksmart-header">
        Walk Smart
    </h1>
    <div style="position: absolute; left: 10px; top: 10px;">
        <img src="Logo.jpg" alt="" style="width: 100px; border-radius: 50%;">
    </div>

    <div class="wrapper">
        <form id="registerForm">
            <h1>Register</h1>
            <div class="input-box">
                <label>First Name</label>
                <input type="text" id="fname" placeholder="Enter your first name" required>
            </div>
            <br>

            <div class="input-box">
                <label>Last Name</label>
                <input type="text" id="lname" placeholder="Enter your last name" required>
            </div>
            <br>

            <div class="input-box">
                <label>Date of Birth</label>
                <input type="date" id="dob" class="textbox" required>
            </div>
            <br>

            <div class="input-box">
                <label>Gender</label>
                <input type="text" id="gender" placeholder="Male/Female" required>
            </div>
            <br>

            <div class="input-box">
                <label>Phone Number</label>
                <input type="tel" placeholder="123-456-7890" required>
            </div>
            <br>

            <div class="input-box">
                <label>Email</label>
                <input type="email" id="email" placeholder="Enter your email" required>
            </div>
            <br>

            <div class="input-box">
                <label>TRN</label>
                <input type="text" id="trn" placeholder="000-000-000" required>
            </div>
            <br>

            <div class="input-box">
                <label>Password</label>
                <input type="password" id="password" placeholder="Enter your password" required>
            </div>
            <br>

            <button type="submit" class="btn">REGISTER</button>

        </form>
    </div>

    <script>
        let users = [];  // Array to hold the users

        // Event listener for form submission
        document.getElementById("registerForm").addEventListener("submit", function(event) {
            event.preventDefault();  // Prevent form from submitting the default way

            // Get input values
            const fname = document.getElementById("fname").value;
            const lname = document.getElementById("lname").value;
            const dob = document.getElementById("dob").value;
            const gender = document.getElementById("gender").value;
            const trn = document.getElementById("trn").value;
            const password = document.getElementById("password").value;

            // Calculate age from the date of birth
            const birthDate = new Date(dob);
            const age = new Date().getFullYear() - birthDate.getFullYear();
            const month = new Date().getMonth();

            // Adjust age if the user hasn't had their birthday yet this year
            if (new Date().getMonth() < birthDate.getMonth() || 
                (new Date().getMonth() === birthDate.getMonth() && new Date().getDate() < birthDate.getDate())) {
                age--;
            }

            // Check if the user is under 18
            if (age < 18) {
                alert("You must be at least 18 years old to register.");
                return;  // Prevent form submission if the user is underage
            }

            // Create a new user object
            const newUser = { fname, lname, dob, gender, trn, password };

            // Push the new user into the users array
            users.push(newUser);

            // Store the users array in localStorage
            localStorage.setItem("users", JSON.stringify(users));

            // Redirect to login page (index.html)
            window.location.href = "index.html";
        });
    </script>
</body>

</html>
